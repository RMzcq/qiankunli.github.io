---

layout: post
title: Python初学
category: 技术
tags: Python
keywords: Python

---

## 前言 

本文是笔者作为一个java程序员，对《python基础教程》的笔记。

python是类似linux shell的解释型语言（其实与javascript更像），只不过使用shell操作多是为了操作计算机，使用python则是为了实现业务逻辑。感觉上的不同在于，如果要创建一个文件夹

- linux，`mkdir dirname`
- python，
    ```
    import os
    os.mkdir(path,mode)
    ```

java是面向对象的，所以对象是第一元素，对任何实例方法的应用都必须通过对象。python不是面向对象的，对于非复杂业务，python代码基本就是`函数 + 函数调用`。

## 基本类型和复合类型

对于任何一门编程语言来说，数据都分为基本类型和复合类型。语言自带的复合类型一般是为数据的存取方便，主要有两种形式：`根据索引存取（数组和list）和根据键值存取`。

- 对于java，基本类型是int,float等，复合类型是list、set等
- 对于python，类型不用声明，基本类型和一般语言差不多，包括整数、浮点数、字符串、布尔值。

对于复合类型，有以下不同点

1. 有可修改和不可修改两种。类似于java的数组和list
2. 一般不要求元素是同一类型


类型转换

- 对于java，`String a = 1 + ""`，`float a = (float)1`
- 对于python，类型转换与 go 类似，比如 `int('8')` 将字符串8 转为8，`a = str(1)`，注意此处str是一个类型，不是一个函数。

解释型语言一般写起来比较简便，`(),[],{}`就可以创建元组、列表和字典。

1. 字符串的基本操作：in(对应java 的List.contains)/序列加序列/序列*整数（重复几次）/序列按下标取数
2. 列表存储的内容可以变更， 中括号，可以append和remove。 元组存储的内容则不可变更，  小括号。  元组可以比较 大小 ，比如 `(1, 5) < (2, 3) # True`。
3. 字典，赋值就像是 json 字符串，大括号。`for xx in xx.keys()`

for 一般用于遍历 集合 使用 `for ... in ..`，如果纯粹是循环次数的话，可以 `for .. in range(1,10)`，死循环 `while True`，条件循环可以 `while 条件`。
可以 用内建函数 `iter(list)` 返回一个迭代器 来遍历 list，类似于java 的Iterator，可以用生成器 生成一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个迭代器。在调用生成器运行的过程中，每次遇到 yield 时函数会暂停并保存当前所有的运行信息，返回 yield 的值, 并在下一次执行 next() 方法时从当前位置继续运行。

推导式是Python的一种独有特性。推导式是可以从一个数据序列构建另一个新的数据序列的结构体。`variable = [out_exp_res for out_exp in input_list if out_exp == 2]`。有点类似 jdk8 的stream 。

## 函数

1. 不用声明返回值类型
2. 传参可以带名字，此时传参不用按顺序。
3. 参数可以设定 是可选的，对于 `def f(a, *b)` 参数b 是可选的
4. lambda函数没有名字，是一种简单的、在同一行中定义函数的方法。lambda表达式只允许包含一个表达式，不能包含复杂语句，该表达式的运算结果就是函数的返回值。将lambda函数赋值给一个变量，通过这个变量间接调用该lambda函数。
    ```python
    f=lambda a,b,c,d:a*b*c*d
    print(f(1,2,3,4))  #相当于下面这个函数
    list1 = [1,2,3,4,5,6,7]
    list(filter(lambda i:i>2, list1))
    ```
4. 内建函数
    1. filter(funcion,iterator), 过滤得到 iterator 中符合funcion 的 元素
    2. map(funciton,iterator), 对iterator 每个元素 进行function 转换

with 语句适用于对资源进行访问的场合，确保不管使用过程中是否发生异常都会执行必要的“清理”操作，释放资源。类似于java的 `try(xx){...}`
```python
with open('path','读写模式‘) as f:
    do something
```
等价于
```python
f = open('path','读写模式')
do something
f.close()
```

## 模块

不可能所有java代码都写到一个`xx.java`文件里，自然也不可能所有的python代码都写到`xx.py`里，所以要分模块。
### 定义模块

为了组织好模块，可以将它们分组为包。

- java中类和文件一般是一一对应关系，类由package组织在一起（在一个package下，一个class文件也可以直接由另一个class文件引用），最终形成一个jar（要专门执行一个打jar的程序），供其他项目使用。
- python是解释型语言，有对象的概念，但对于初级开发者来说，对象不是主要的。**一个模块是一个文件**，包含几个函数，可以直接由另一个模块引用（`import 模块名`），也可以作为包的一部分被其它模块引用（`import 包名`）。包就是模块所在的目录，为了让python将目录作为包对待，它必须包含一个命名为_init_py的文件。包也是一个模块，其内容就是_init_py的文件的内容。

### 使用模块
a模块引用b模块，那么系统到哪里去找b模块呢？两个办法

1. 将b模块放在合适的位置
2. 告诉解释器去哪里找

**给python文件xx.py起名时，尽量不要用一些公共的包名，比如json等。**假设有一个json.py，那么同一个包下的另一个python文件`import json`时就会找到自己写的json.py。（类似java classpath的搜索优先级问题）

```
import 模块名称
import 模块名称 as  别名
from 模块名称 import 方法名
```
### 注意事项

作为解释型语言，模块在被import时会被执行（仅仅定义一个方法，而没有调用一个方法是不算的）。但模块（xx.py）中总会包含一些执行代码（比如测试代码），在运行该模块时，执行代码，在该模块被导入到另外一个模块时，不执行这些代码。因此，python提供一个`_name_`变量来标记，模块目前是被当做主模块执行（此时`_name_ == _main_`），还是一个被导入的模块（此时`_name_ == _模块本身的名字_`）。

so，我们可以将一个模块的执行代码放在if语句中，`if _name_ == _main_:`

## 面向对象

```python
class Player():
    def __init__(self,name,hp):
        self.name = name
        self.hp = hp
    def print_role(self):
        print('%s %s' %{self.name,self.hp})
user1 = Player('tom',100)
user1.print_role()
# MalePlayer 集成 Player
class MalePlayer(Player):
    ...

mp = MalePlayer("zhangsan",100)
print('mp的类型 %s' %type(mp))
print(isinstance(mp,Player))
```

1. 属性如果不想被直接访问，需要使用 `__` 前缀修饰
2. 所有的类 都继承自 object

## 安装第三方包

现在变成语言，大都会有一些对应的库，比如java可以使用第三方jar（通过配置maven依赖），go可以引入第三方包（`go get xx`），python安装第三方包有以下方法：

1. 使用pip工具（`pip install xx`）
2. 下载第三方包文件，执行其对应的安装脚本，`python setup.py install`（跟python安装pip的方式一样）

其本质都是将第三方包文件放在约定目录。

