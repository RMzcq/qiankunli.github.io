---

layout: post
title: 学习rpc
category: 架构
tags: RPC
keywords: network communication protocol

---

## 简介（持续更新）

* TOC
{:toc}

RPC 对应的是整个分布式应用系统，就像是“经络”一样的存在。RPC 框架能够帮助我们解决系统拆分后的通信问题，并且能让我们像调用本地一样去调用远程方法。

![](/public/upload/rpc/rpc_usage.jpeg)

如果没有 RPC 框架，你要如何调用另一台服务器上的接口呢？RPC 涉及序列化、压缩算法、协议、动态代理、服务注册、加密、网络编程、连接管理、健康检测、负载均衡、优雅启停机、异常重试、业务分组以及熔断限流等方方面面的知识。如果你能把这些问题全部搞定，能力可见一斑。

![](/public/upload/rpc/rpc_ability_model.png)

## 基本通信过程

1. 对象序列化 ==> 发送数据包 ==> 反序列化为对象 ==> 找到对象并执行方法。
2. 如何简化？用AOP 来屏蔽底层细节。由服务提供者给出业务接口声明，在调用方的程序里面，RPC 框架根据调用的服务接口提前生成动态代理实现类，并通过依赖注入等技术注入到声明了该接口的相关业务逻辑里面。该代理实现类会拦截所有的方法调用，在提供的方法处理逻辑里面完成一整套的远程调用，并把远程调用结果返回给调用方，这样调用方在调用远程方法的时候就获得了像调用本地接口一样的体验。